<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.TeacherMapper">
    <resultMap id="teacherResultMap" type="com.example.model.domain.Teacher">
        <id property="id" column="id"/>
        <result property="name" column="name"/>
        <result property="userId" column="userId"/>
        <result property="vxName" column="vxName"/>
        <result property="primarySchool" column="primarySchool"/>
        <result property="middleSchool" column="middleSchool"/>
        <result property="highSchool" column="highSchool"/>
        <result property="university" column="university"/>
        <result property="chinaIdNumberPictureFileName" column="chinaIdNumberPictureFileName"/>
        <result property="address" column="address"/>
        <result property="mobile" column="mobile"/>
        <result property="teachingSeniority" column="teachingSeniority"/>
        <result property="teachingType" column="teachingType"/>
        <result property="personalProfile" column="personalProfile"/>
        <result property="academicQualificationPictureFileName" column="academicQualificationPictureFileName"/>
        <result property="price" column="price"/>
        <result property="lifePicture" column="lifePicture"/>
    </resultMap>

    <insert id="saveTeacher" parameterType="com.example.model.domain.Teacher">
        INSERT INTO teacher
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">id,</if>
            <if test="userId != null">userId,</if>
            <if test="name != null">name,</if>
            <if test="vxName != null">vxName,</if>
            <if test="gender != null">gender,</if>
            <if test="primarySchool != null">primarySchool,</if>
            <if test="middleSchool != null">middleSchool,</if>
            <if test="highSchool != null">highSchool,</if>
            <if test="university != null">university,</if>
            <if test="chinaIdNumber != null">chinaIdNumber,</if>
            <if test="chinaIdNumberPictureFileName != null">chinaIdNumberPictureFileName,</if>
            <if test="address != null">address,</if>
            <if test="mobile != null">mobile,</if>
            <if test="teachingSeniority != null">teachingSeniority,</if>
            <if test="teachingType != null">teachingType,</if>
            <if test="personalProfile != null">personalProfile,</if>
            <if test="academicQualification != null">academicQualification,</if>
            <if test="academicQualificationPictureFileName != null">academicQualificationPictureFileName,</if>
            <if test="price != null">price,</if>
            <if test="lifePicture != null">lifePicture,</if>
        </trim>
        <trim prefix="VALUES(" suffix=")" suffixOverrides=",">
            <if test="id != null">#{id},</if>
            <if test="userId != null">#{userId},</if>
            <if test="name != null">#{name},</if>
            <if test="vxName != null">#{vxName},</if>
            <if test="gender != null">#{gender},</if>
            <if test="primarySchool != null">#{primarySchool},</if>
            <if test="middleSchool != null">#{middleSchool},</if>
            <if test="highSchool != null">#{highSchool},</if>
            <if test="university != null">#{university},</if>
            <if test="chinaIdNumber != null">#{chinaIdNumber},</if>
            <if test="chinaIdNumberPictureFileName != null">#{chinaIdNumberPictureFileName},</if>
            <if test="address != null">#{address},</if>
            <if test="mobile != null">#{mobile},</if>
            <if test="teachingSeniority != null">#{teachingSeniority},</if>
            <if test="teachingType != null">#{teachingType},</if>
            <if test="personalProfile != null">#{personalProfile},</if>
            <if test="academicQualification != null">#{academicQualification},</if>
            <if test="academicQualificationPictureFileName != null">#{academicQualificationPictureFileName},</if>
            <if test="price != null">#{price},</if>
            <if test="lifePicture != null">#{lifePicture},</if>
        </trim>
    </insert>

        <!-- 查询所有老师信息 -->
    <select id="getAllTeachers" resultType="com.example.model.domain.Teacher">
        SELECT * FROM teacher
    </select>
    <!-- 根据ID查询老师信息 -->
    <select id="getTeacherById" parameterType="String" resultType="com.example.model.domain.Teacher">
        SELECT * FROM teacher WHERE userId = #{userId}
    </select>
   <!-- 根据多个条件查询老师信息 -->
    <select id="getTeachersByConditions" parameterType="map" resultType="com.example.model.domain.Teacher">
        SELECT * FROM teacher
        <where>
            <if test="id != null">id = #{id}</if>
            <if test="userId != null">AND userId = #{userId}</if>
            <if test="name != null">AND name = #{name}</if>
            <if test="vxName != null">AND vxName = #{vxName}</if>
            <if test="gender != null">AND gender = #{gender}</if>
            <if test="primarySchool != null">AND primarySchool = #{primarySchool}</if>
            <if test="middleSchool != null">AND middleSchool = #{middleSchool}</if>
            <if test="highSchool != null">AND highSchool = #{highSchool}</if>
            <if test="university != null">AND university = #{university}</if>
            <if test="chinaIdNumber != null">AND chinaIdNumber = #{chinaIdNumber}</if>
            <if test="chinaIdNumberPictureFileName != null">AND chinaIdNumberPictureFileName = #{chinaIdNumberPictureFileName}</if>
            <if test="address != null">AND address = #{address}</if>
            <if test="mobile != null">AND mobile = #{mobile}</if>
            <if test="teachingSeniority != null">AND teachingSeniority = #{teachingSeniority}</if>
            <if test="teachingType != null">AND teachingType = #{teachingType}</if>
            <if test="personalProfile != null">AND personalProfile = #{personalProfile}</if>
            <if test="academicQualification != null">AND academicQualification = #{academicQualification}</if>
            <if test="academicQualificationPictureFileName != null">AND academicQualificationPictureFileName = #{academicQualificationPictureFileName}</if>
            <if test="price != null">AND price = #{price}</if>
        </where>
    </select>

    <!-- 更新老师信息 -->
    <update id="updateTeacher" parameterType="com.example.model.domain.Teacher">
        UPDATE teacher
        <set>
            <if test="userId != null">userId = #{userId},</if>
            <if test="name != null">name = #{name},</if>
            <if test="vxName != null">vxName = #{vxName},</if>
            <if test="gender != null">gender = #{gender},</if>
            <if test="primarySchool != null">primarySchool = #{primarySchool},</if>
            <if test="middleSchool != null">middleSchool = #{middleSchool},</if>
            <if test="highSchool != null">highSchool = #{highSchool},</if>
            <if test="university != null">university = #{university},</if>
            <if test="chinaIdNumber != null">chinaIdNumber = #{chinaIdNumber},</if>
            <if test="chinaIdNumberPictureFileName != null">chinaIdNumberPictureFileName = #{chinaIdNumberPictureFileName},</if>
            <if test="address != null">address = #{address},</if>
            <if test="mobile != null">mobile = #{mobile},</if>
            <if test="teachingSeniority != null">teachingSeniority = #{teachingSeniority},</if>
            <if test="teachingType != null">teachingType = #{teachingType},</if>
            <if test="personalProfile != null">personalProfile = #{personalProfile},</if>
            <if test="academicQualification != null">academicQualification = #{academicQualification},</if>
            <if test="academicQualificationPictureFileName != null">academicQualificationPictureFileName = #{academicQualificationPictureFileName}</if>
            <if test="price != null">price = #{price}</if>
            <if test="lifePicture != null">lifePicture = #{lifePicture}</if>
        </set>
        WHERE id = #{id}
    </update>
    
    <!-- 删除老师信息 -->
    <delete id="deleteTeacherById" parameterType="long">
        DELETE FROM teacher WHERE id = #{id}
    </delete>

    <select id="queryByUserId" resultMap="teacherResultMap">
        select * from teacher
        WHERE userId = #{id}
    </select>

</mapper>
